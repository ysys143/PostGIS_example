/* 지도 컨테이너 스타일 */
#map {
    z-index: 0;
    background: #e5e7eb;
    width: 100%;
    height: 100%;
}

/* 검색 결과 팝업 */
.search-popup {
    z-index: 1000;
}

/* 컴팩트 팝업 스타일 */
.compact-popup .leaflet-popup-content-wrapper {
    border-radius: 2px !important;
    padding: 0 !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
    border: 1px solid #ccc !important;
}

.compact-popup .leaflet-popup-content {
    margin: 0 !important;
    padding: 0 !important;
    min-height: auto !important;
}

.compact-popup .leaflet-popup-tip {
    border-radius: 0 !important;
}

.compact-popup .leaflet-popup-close-button {
    top: 2px !important;
    right: 2px !important;
    width: 16px !important;
    height: 16px !important;
    font-size: 12px !important;
    line-height: 14px !important;
    color: #666 !important;
}

/* 스크롤바 스타일 */
.custom-scrollbar::-webkit-scrollbar {
    width: 4px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #e5e7eb;
    border-radius: 2px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #bdbdbd;
}

/* 로딩 애니메이션 */
.loading-spinner {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* 카드 호버 효과 */
.card-hover {
    transition: all 0.3s ease;
}
.card-hover:hover {
    box-shadow: 0 0 0 2px #1976d2 !important;
    background: #f0f7ff !important;
}

/* ===== Dark Professional Theme Overrides ===== */
body {
    background-color: #1f2937; /* slate-800 */
    color: #d1d5db; /* gray-300 */
    font-family: 'Inter', 'Fira Code', 'Segoe UI', Arial, sans-serif;
    background: #f7f7fa;
    font-size: 14px;
}

.bg-white {
    background-color: #27303f !important; /* panel background */
}

.bg-gray-50 {
    background-color: #1f2937 !important;
}

.border-gray-200 {
    border-color: #3e4a5e !important;
}

.text-gray-800 {
    color: #f3f4f6 !important;
}
.text-gray-700 {
    color: #e5e7eb !important;
}
.text-gray-600 {
    color: #9ca3af !important;
}
.text-gray-500 {
    color: #6b7280 !important;
}

/* Button & accent colors (desaturated) */
.bg-blue-600 { background-color: #334155 !important; }
.bg-blue-700 { background-color: #1e293b !important; }
.bg-green-600 { background-color: #3f6212 !important; }
.bg-purple-600 { background-color: #4c1d95 !important; }
.bg-orange-600 { background-color: #7c2d12 !important; }
.bg-red-600 { background-color: #7f1d1d !important; }

/* Hover variants */
.bg-blue-700:hover, .hover\:bg-blue-700:hover { background-color: #1e40af !important; }
.bg-gray-700:hover, .hover\:bg-gray-700:hover { background-color: #374151 !important; }
.bg-green-700:hover, .hover\:bg-green-700:hover { background-color: #365314 !important; }
.bg-purple-700:hover, .hover\:bg-purple-700:hover { background-color: #3b0764 !important; }
.bg-orange-700:hover, .hover\:bg-orange-700:hover { background-color: #652b0e !important; }
.bg-red-700:hover, .hover\:bg-red-700:hover { background-color: #641414 !important; }

/* Gradient overrides */
.from-blue-600 { --tw-gradient-from: #334155 !important; }
.to-blue-700 { --tw-gradient-to: #1e293b !important; }

/* ===== Light Professional Theme Overrides ===== */
body {
    background-color: #f3f4f6 !important; /* gray-100 */
    color: #374151 !important; /* gray-700 */
}

.bg-gray-50, .bg-white {
    background-color: #ffffff !important;
}

.border-gray-200 {
    border-color: #d1d5db !important; /* gray-300 */
}

.text-gray-800 { color: #1f2937 !important; }
.text-gray-700 { color: #374151 !important; }
.text-gray-600 { color: #4b5563 !important; }
.text-gray-500 { color: #6b7280 !important; }

/* Neutral button palette */
.bg-blue-600,
.bg-green-600,
.bg-purple-600,
.bg-orange-600,
.bg-red-600 {
    background-color: #4b5563 !important; /* slate-600 */
}

.bg-blue-700,
.bg-green-700,
.bg-purple-700,
.bg-orange-700,
.bg-red-700 {
    background-color: #374151 !important; /* slate-700 */
}

/* Hover (slightly darker) */
.bg-blue-600:hover, .bg-green-600:hover, .bg-purple-600:hover, .bg-orange-600:hover, .bg-red-600:hover,
.hover\:bg-blue-700:hover, .hover\:bg-gray-700:hover, .hover\:bg-green-700:hover, .hover\:bg-purple-700:hover, .hover\:bg-orange-700:hover, .hover\:bg-red-700:hover {
    background-color: #1f2937 !important; /* slate-800 */
}

/* Gradient neutralization */
.from-blue-600 { --tw-gradient-from: #4b5563 !important; }
.to-blue-700 { --tw-gradient-to: #374151 !important; }

/* ===== Geek Minimal Tweaks ===== */
button, input, select {
    border-radius: 2px !important;
    box-shadow: none !important;
    font-family: 'Fira Code', monospace;
}

.bg-slate-button {
    background-color: #374151 !important;
    color: #f9fafb !important;
}

button:hover {
    opacity: 0.9 !important;
}

/* Panels */
.rounded { border-radius: 4px !important; }
.shadow-xl, .shadow-lg, .shadow-2xl { box-shadow: none !important; }

/* ===== Geek Neutralization ===== */

/* 슬라이더(blue→slate) */
input[type=range]::-webkit-slider-thumb {
    background: #374151 !important;
    border: 1px solid #6b7280 !important;
}
input[type=range]::-webkit-slider-runnable-track {
    background: #e5e7eb !important;
}
input[type=range] {
    accent-color: #374151 !important;
}

/* 아이콘(색상→중성) */
.fa-sync-alt, .fa-crosshairs, .fa-filter, .fa-draw-polygon, .fa-info-circle {
    color: #6b7280 !important;
}

/* 강조 텍스트(주황/초록/빨강→중성) */
.text-red-600, .text-orange-600, .text-green-600, .text-yellow-600 {
    color: #374151 !important;
    font-weight: 500 !important;
}

/* 버튼 텍스트도 중성 */
button, .bg-slate-button {
    color: #f3f4f6 !important;
}

/* 사이드바 헤더 배경도 중성 */
.bg-gradient-to-r.from-blue-600.to-blue-700 {
    background: #23272f !important;
    background-image: none !important;
}

input[type=number] {
    min-width: 0 !important;
    width: 100% !important;
}

/* ===== 전문가용 툴 스타일 (ArcGIS/CARTO/IDE) ===== */
.sidebar {
    width: var(--sidebar-width);
    background: var(--color-bg);
    border-right: var(--border);
    box-shadow: var(--shadow);
    display: flex;
    flex-direction: column;
    gap: var(--panel-gap);
    padding: 0 !important;
    min-height: 100vh;
    margin-top: 0 !important;
    top: 0 !important;
}
.main-content {
    flex: 1;
    min-width: 0;
    background: #e5e7eb;
    position: relative;
}
.panel {
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    padding: 16px;
    margin-bottom: 8px;
}
.panel-title {
    font-size: 15px;
    font-weight: 600;
    color: #1976d2;
    margin-bottom: 8px;
}
input, button, select {
    border: 1px solid #e5e7eb;
    border-radius: 3px;
    background: #f7f7fa;
    font-family: inherit;
    font-size: 14px;
    padding: 0 8px;
    height: 32px;
}
input:focus, select:focus {
    outline: 2px solid #1976d2;
    background: #fff;
}
button {
    background: #444 !important;
    color: #fff !important;
    font-weight: 500;
    border: var(--border);
    border-radius: var(--radius);
    transition: background 0.15s, color 0.15s;
    box-shadow: none;
    cursor: pointer;
    min-width: 0;
}
button.primary,
button:not(:disabled):not(.disabled) {
    background: var(--color-key) !important;
    color: #fff !important;
    border: 1.5px solid var(--color-key-hover) !important;
}
button:disabled, .disabled {
    background: var(--color-disabled) !important;
    color: var(--color-disabled-text) !important;
    border: 1.5px solid var(--color-disabled-border) !important;
    cursor: not-allowed;
    opacity: 1;
    box-shadow: none !important;
}
button:hover:not(:disabled) {
    background: #222;
}
button.primary:hover:not(:disabled) {
    background: var(--color-key-hover);
}
/* 슬라이더 */
input[type=range] {
    accent-color: #1976d2;
    height: 2px;
    margin: 8px 0;
}
input[type=range]::-webkit-slider-thumb {
    background: #1976d2;
    border: 1px solid #e5e7eb;
}
input[type=range]::-webkit-slider-runnable-track {
    background: #e5e7eb;
}
/* 카드/패널 그림자 제거 */
.rounded, .panel {
    border-radius: 4px !important;
}
.shadow-xl, .shadow-lg, .shadow-2xl {
    box-shadow: none !important;
}
/* 아이콘 중성화 */
.fa, .fas, .far, .fal, .fab {
    color: #888 !important;
}
/* 강조 텍스트 */
.text-red-600, .text-orange-600, .text-green-600, .text-yellow-600 {
    color: #1976d2 !important;
    font-weight: 600 !important;
}
/* 사이드바 헤더 */
.bg-gradient-to-r.from-blue-600.to-blue-700 {
    background: #1976d2 !important;
    background-image: none !important;
    color: #fff !important;
}
/* 기타 */
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #e5e7eb;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #bdbdbd;
}
.card-hover:hover {
    box-shadow: 0 0 0 2px #1976d2 !important;
    background: #f0f7ff !important;
}
/* 지도 컨테이너 */
#map { background: #e5e7eb; }

/* Panels */
.rounded { border-radius: 4px !important; }
.shadow-xl, .shadow-lg, .shadow-2xl { box-shadow: 0 0 0 1px #e5e7eb !important; }

/* ===== Geek Neutralization ===== */

/* 슬라이더(blue→slate) */
input[type=range]::-webkit-slider-thumb {
    background: #374151 !important;
    border: 1px solid #6b7280 !important;
}
input[type=range]::-webkit-slider-runnable-track {
    background: #e5e7eb !important;
}
input[type=range] {
    accent-color: #374151 !important;
}

/* 아이콘(색상→중성) */
.fa-sync-alt, .fa-crosshairs, .fa-filter, .fa-draw-polygon, .fa-info-circle {
    color: #6b7280 !important;
}

/* 강조 텍스트(주황/초록/빨강→중성) */
.text-red-600, .text-orange-600, .text-green-600, .text-yellow-600 {
    color: #374151 !important;
    font-weight: 500 !important;
}

/* 버튼 텍스트도 중성 */
button, .bg-slate-button {
    color: #f3f4f6 !important;
}

/* 사이드바 헤더 배경도 중성 */
.bg-gradient-to-r.from-blue-600.to-blue-700 {
    background: #23272f !important;
    background-image: none !important;
}

input[type=number] {
    min-width: 0 !important;
    width: 100% !important;
}

/* Leaflet 줌 컨트롤 오른쪽 상단 이동 */
.leaflet-top.leaflet-left {
    right: 16px;
    left: auto;
}

#map-scale, #map-coords {
  pointer-events: none;
  z-index: 1200 !important;
  background: #fff;
  border: 1px solid #e5e7eb;
  color: #333;
  min-width: 90px;
  text-align: center;
  font-size: 13px;
  font-family: 'Fira Code', monospace;
}

/* Leaflet 기본 축척 컨트롤 투명/검정 */
.leaflet-control-scale {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}
.leaflet-control-scale-line {
  background: transparent !important;
  color: #111 !important;
  border: none !important;
  border-bottom: 1px solid #111 !important; /* 바(막대)만 남김 */
  box-shadow: none !important;
  font-size: 10px !important;
  font-family: 'Fira Code', monospace;
  font-weight: 500;
  padding-bottom: 2px !important;
}

/* ===== 디자인 시스템 토큰 (Figma 연동) ===== */
:root {
  --color-key: #8B6B3A;
  --color-key-hover: #5C4324;
  --color-bg: #F7F3EF;
  --color-panel: #FFF;
  --color-border: #E9D8C3;
  --color-shadow: 0 2px 8px rgba(0,0,0,0.04);
  --color-card-anchor: #C97E3A;
  --color-card-anchor-bg: #F3E6D0;
  --color-card-shadow: 0 2px 8px rgba(139,107,58,0.07);
  --font-main: 'Inter', 'Fira Code', 'Segoe UI', Arial, sans-serif;
  --font-mono: 'Fira Code', monospace;
  --radius: 6px;
  --border: 1px solid var(--color-border);
  --shadow: var(--color-shadow);
  --card-shadow: var(--color-card-shadow);
  --sidebar-width: 280px;
  --grid: 8px;
  --panel-padding: 16px;
  --panel-gap: 16px;
  --section-gap: 24px;
  --anchor-width: 3px;
  --step-indicator-size: 18px;
  --color-disabled: #d1cfc9;         /* 더 진한 연회색 */
  --color-disabled-text: #4b4b4b;    /* 거의 검정에 가까운 진회색 */
  --color-disabled-border: #b8b6b0;  /* 테두리용 */
}

body {
  background: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-main);
  font-size: 15px;
  letter-spacing: -0.01em;
}

.sidebar {
  padding: 0 !important;
  gap: 8px !important;
}

.main-content {
  flex: 1;
  min-width: 0;
  background: #e5e7eb;
  position: relative;
}

/* 카드형 패널 */
.panel {
  background: var(--color-panel);
  border: var(--border);
  border-radius: var(--radius);
  box-shadow: var(--card-shadow);
  padding: var(--panel-padding);
  margin-bottom: var(--grid);
  position: relative;
  display: flex;
  flex-direction: column;
  gap: var(--grid);
}

/* 카드 섹션 앵커 */
.panel::before {
  content: '';
  display: block;
  position: absolute;
  left: 0; top: var(--panel-padding);
  width: var(--anchor-width);
  height: 28px;
  background: var(--color-card-anchor);
  border-radius: var(--radius);
  opacity: 0.12;
}

.panel-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-key);
  margin-bottom: var(--grid);
  padding-left: calc(var(--anchor-width) + 4px);
  letter-spacing: -0.01em;
}

input, button, select {
  border: var(--border);
  border-radius: var(--radius);
  background: var(--color-bg);
  font-family: inherit;
  font-size: 15px;
  padding: 0 var(--grid);
  height: 32px;
}
input:focus, select:focus {
  outline: 2px solid var(--color-key);
  background: #fff;
}

button {
  background: #444 !important;
  color: #fff !important;
  font-weight: 500;
  border: var(--border);
  border-radius: var(--radius);
  transition: background 0.15s, color 0.15s;
  box-shadow: none;
  cursor: pointer;
  min-width: 0;
}

button.primary,
button:not(:disabled):not(.disabled) {
  background: var(--color-key) !important;
  color: #fff !important;
  border: 1.5px solid var(--color-key-hover) !important;
}

button:disabled, .disabled {
  background: var(--color-disabled) !important;
  color: var(--color-disabled-text) !important;
  border: 1.5px solid var(--color-disabled-border) !important;
  cursor: not-allowed;
  opacity: 1;
  box-shadow: none !important;
}

/* 슬라이더 */
input[type=range] {
  accent-color: var(--color-key);
  height: 2px;
  margin: var(--grid) 0;
}
input[type=range]::-webkit-slider-thumb {
  background: var(--color-key);
  border: var(--border);
}
input[type=range]::-webkit-slider-runnable-track {
  background: var(--color-border);
}

/* 카드/패널 그림자 제거 */
.rounded, .panel {
  border-radius: var(--radius) !important;
}
.shadow-xl, .shadow-lg, .shadow-2xl {
  box-shadow: none !important;
}

/* 아이콘 중성화 */
.fa, .fas, .far, .fal, .fab {
  color: #888 !important;
}

/* 강조 텍스트 */
.text-red-600, .text-orange-600, .text-green-600, .text-yellow-600 {
  color: var(--color-key) !important;
  font-weight: 600 !important;
}

/* 사이드바 헤더 */
.bg-gradient-to-r.from-blue-600.to-blue-700 {
  background: var(--color-key) !important;
  background-image: none !important;
  color: #fff !important;
}

input[type=number] {
  min-width: 0 !important;
  width: 100% !important;
}

/* Leaflet 줌 컨트롤 오른쪽 상단 이동 */
.leaflet-top.leaflet-left {
  right: 16px;
  left: auto;
}

/* 커스텀 스크롤바 */
.custom-scrollbar::-webkit-scrollbar {
  width: 4px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: var(--color-bg);
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 2px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #bdbdbd;
}

/* 카드 hover 효과 */
.card-hover {
  transition: all 0.3s ease;
}
.card-hover:hover {
  box-shadow: 0 0 0 2px var(--color-key) !important;
  background: var(--color-card-anchor-bg) !important;
}

/* 로딩 스피너 */
.loading-spinner {
  animation: spin 1s linear infinite;
  color: var(--color-key);
}
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* 비활성화 버튼/입력창 스타일 */
button:disabled, .disabled, input:disabled, select:disabled {
  background: var(--color-disabled) !important;
  color: var(--color-disabled-text) !important;
  border: 1.5px solid var(--color-disabled-border) !important;
  cursor: not-allowed;
  opacity: 1;
  box-shadow: none !important;
}

input, button, select {
  height: 26px !important;
  font-size: 13px !important;
  padding: 0 6px !important;
}

.panel {
  padding: 8px !important;
  margin-bottom: 4px !important;
  gap: 4px !important;
}

.sidebar {
  padding: 0 !important;
  gap: 8px !important;
}

.panel-title {
  font-size: 13px !important;
  margin-bottom: 4px !important;
  padding-left: calc(var(--anchor-width) + 2px) !important;
}

.range-fake-disabled {
  opacity: 0.5;
  pointer-events: auto; /* 반드시 auto로! */
  /* 커서도 기본으로 */
  cursor: pointer;
}

/* 통계 모달 전체 컴팩트 스타일 */
#stats-modal .bg-white {
  border-radius: 8px !important;
  box-shadow: var(--card-shadow) !important;
  padding: 0 !important;
  max-width: 600px !important;
  max-height: 80vh !important;
}

/* 통계 모달 헤더 */
#stats-modal .bg-gradient-to-r {
  background: var(--color-key) !important;
  color: #fff !important;
  border-radius: 8px 8px 0 0 !important;
  padding: 8px 12px !important;
}

/* 통계 모달 타이포그래피 통일 */

/* 모달 제목 (헤더) */
#stats-modal .text-xl {
  font-size: 14px !important;
  font-weight: 600 !important;
}

/* 카드 제목 */
#stats-modal .text-lg {
  font-size: 12px !important;
  font-weight: 600 !important;
  color: var(--color-key) !important;
}

/* 카드 부제목/설명 */
#stats-modal .text-blue-700,
#stats-modal .text-orange-700,
#stats-modal .text-purple-700,
#stats-modal .text-gray-700 {
  font-size: 11px !important;
  font-weight: 400 !important;
  color: #666 !important;
}

/* 메인 숫자 (큰 통계값) */
#stats-modal .text-3xl {
  font-size: 16px !important;
  font-weight: 700 !important;
  color: var(--color-key) !important;
}

/* 보조 숫자 (중간 통계값) */
#stats-modal .text-2xl {
  font-size: 14px !important;
  font-weight: 600 !important;
  color: var(--color-key) !important;
}

/* 일반 텍스트 */
#stats-modal .text-sm {
  font-size: 11px !important;
  color: #666 !important;
  font-weight: 400 !important;
}

/* 라벨 텍스트 */
#stats-modal .text-blue-800,
#stats-modal .text-orange-800,
#stats-modal .text-purple-800,
#stats-modal .text-gray-800 {
  font-size: 11px !important;
  font-weight: 500 !important;
  color: #444 !important;
}

/* 강조 숫자 (색상별) */
#stats-modal .text-blue-600,
#stats-modal .text-orange-600,
#stats-modal .text-purple-600,
#stats-modal .text-green-600,
#stats-modal .text-red-600 {
  font-size: 14px !important;
  font-weight: 600 !important;
  color: var(--color-key) !important;
}

/* 제목 텍스트 (카드 내부) */
#stats-modal .text-blue-900,
#stats-modal .text-orange-900,
#stats-modal .text-purple-900,
#stats-modal .text-gray-900 {
  font-size: 12px !important;
  font-weight: 600 !important;
  color: #333 !important;
}

/* 아이콘 텍스트 */
#stats-modal .text-white {
  font-size: 10px !important;
  font-weight: 400 !important;
}

/* 규모별 분포 카드 내부 텍스트 통일 */
#stats-modal .bg-white.rounded-lg p {
  font-size: 11px !important;
}

#stats-modal .bg-white.rounded-lg .text-xl {
  font-size: 13px !important;
  font-weight: 600 !important;
  color: var(--color-key) !important;
}

/* 그리드 간격 줄이기 */
#stats-modal .gap-6 {
  gap: 8px !important;
}

#stats-modal .gap-4 {
  gap: 6px !important;
}

#stats-modal .gap-3 {
  gap: 4px !important;
}

/* 여백 줄이기 */
#stats-modal .mb-4 {
  margin-bottom: 6px !important;
}

#stats-modal .mb-2 {
  margin-bottom: 4px !important;
}

#stats-modal .mr-4 {
  margin-right: 6px !important;
}

#stats-modal .mr-3 {
  margin-right: 4px !important;
}

/* 규모별 분포 카드 */
#stats-modal .col-span-1.md\\:col-span-2 {
  grid-column: span 2 !important;
}

#stats-modal .grid-cols-2.md\\:grid-cols-4 {
  grid-template-columns: repeat(4, 1fr) !important;
}

#stats-modal .shadow-sm {
  box-shadow: none !important;
  border: 1px solid var(--color-border) !important;
}

/* 모달 내용 영역 */
#stats-modal .overflow-y-auto {
  padding: 8px 12px !important;
}

/* 닫기 버튼 */
#stats-modal .close {
  padding: 4px !important;
  font-size: 12px !important;
}

/* 통계 카드들 */
#stats-modal .rounded-xl {
  border-radius: 6px !important;
  box-shadow: none !important;
  border: 1px solid var(--color-border) !important;
  background: var(--color-panel) !important;
  padding: 8px 10px !important;
  margin-bottom: 6px !important;
}

#stats-modal .p-6 {
  padding: 8px 10px !important;
}

#stats-modal .p-4 {
  padding: 6px 8px !important;
}

#stats-modal .p-3 {
  padding: 4px 6px !important;
}

/* 카드 헤더 아이콘 */
#stats-modal .bg-blue-500,
#stats-modal .bg-orange-500,
#stats-modal .bg-purple-500,
#stats-modal .bg-gray-500 {
  background: var(--color-key) !important;
  color: #fff !important;
  border-radius: 4px !important;
  padding: 4px !important;
  width: 24px !important;
  height: 24px !important;
}

/* 통계 모달 위치 조정 */
#stats-modal {
  padding-top: 2vh !important;
  padding-bottom: 2vh !important;
}

#stats-modal .flex.items-center.justify-center {
  align-items: flex-start !important;
  padding-top: 2vh !important;
}

#stats-modal .min-h-screen {
  min-height: auto !important;
} 